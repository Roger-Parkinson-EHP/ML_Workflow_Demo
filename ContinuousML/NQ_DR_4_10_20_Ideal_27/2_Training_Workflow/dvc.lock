schema: '2.0'
stages:
  training:
    cmd:
    - pip install -r ../../../src/Model_Training/requirements.txt
    - cml-tensorboard-dev --logdir logs --name "Go to tensorboard" --md >> report.md
    - cml-send-comment report.md
    - python ../../../src/Model_Training/Model_Training.py
    - echo "# Multi Class Classification" >> report.md
    - echo "## Plots" >> report.md
    - echo "### Loss across epochs" >> report.md
    - cml-publish loss_plot.png --md --title 'Loss' >> report.md
    - echo "\n### Class confusion from seaborn " >> report.md
    - cml-publish confusion.png --md --title 'Confusion' >> report.md
    - echo "\n### Change of metrics"
    - dvc metrics diff --show-md >> report.md
    - cml-send-comment report.md
    - git add \*.json
    - git add \*.csv
    deps:
    - path: ../../../src/Model_Training/Model_Training.py
      md5: 2e543fc8cff7391f93ce5009ad9838c4
      size: 5918
    - path: Reduced_Features.csv
      md5: e334d3c03a5a70beebb755fa2d68580b
      size: 7946021
    params:
      params.yaml:
        test_size: 0.2
        train.activation: relu
        train.batch_size: 32
        train.epochs: 20
        train.fc_layers:
        - 512
        - 256
        - 128
        - 64
        - 32
    outs:
    - path: classes.csv
      md5: 9ca6ab661d27d7ffb3694f1ddc9418ef
      size: 6657
    - path: keras_model.onnx
      md5: 7840502dff751e2ac1c47c8cde17e973
      size: 1454766
    - path: losses.csv
      md5: 6368dc3c2be5b081da1bd1c7ec3aae0a
      size: 1676
    - path: metrics.json
      md5: ca4ef5ccc2f1a537ea86f99c12c23931
      size: 230
